import{elementIsExistWithLog as r}from"./general.js";const e=class{constructor(t){if(r("SpoilerMenu",t.btnsSelector,t.contentBlocksSelector))(t.maxWorkWidth<0||t.animationDuration<0)&&console.log("[SpoilerMenu] maxWorkWidth < 0 or animationDuration < 0!");else return;if(e.spoilerButtons=document.querySelectorAll(t.btnsSelector),e.spoilerContentElements=document.querySelectorAll(t.contentBlocksSelector),t.buttonActiveClass&&(e.btnActiveClass=t.buttonActiveClass),t.contentActiveClass&&(e.contentActiveClass=t.contentActiveClass),e.spoilerButtons.length!=e.spoilerContentElements.length){console.log("[SpoilerMenu] The count of buttons and content-elements must be equal.");return}e.spoilerVisibleWidth=t.maxWorkWidth,e.animationDuration=t.animationDuration,this.toggleToSpoilers(),window.addEventListener("resize",this.toggleToSpoilers)}toggleToSpoilers(){if(window.innerWidth<=e.spoilerVisibleWidth)for(let t=0;t<e.spoilerContentElements.length;t++)e.spoilerButtons[t].classList.contains(e.btnActiveClass)?(e.spoilerContentElements[t].style.removeProperty("height"),e.spoilerContentElements[t].style.height=e.spoilerContentElements[t].clientHeight+"px",e.spoilerContentElements[t].style.opacity="1",e.spoilerContentElements[t].style.pointerEvents="all"):(e.spoilerContentElements[t].style.height="0px",e.spoilerContentElements[t].style.opacity="0",e.spoilerContentElements[t].style.pointerEvents="none"),e.spoilerContentElements[t].style.overflow="hidden",e.spoilerButtons[t].addEventListener("click",e.toggleSpoilerState),e.spoilerButtons[t].style.cursor="pointer";else for(let t=0;t<e.spoilerContentElements.length;t++)e.spoilerContentElements[t].style.removeProperty("height"),e.spoilerContentElements[t].style.removeProperty("opacity"),e.spoilerContentElements[t].style.removeProperty("pointer-events"),e.spoilerContentElements[t].style.removeProperty("overflow"),e.spoilerButtons[t].removeEventListener("click",e.toggleSpoilerState),e.spoilerButtons[t].style.cursor="default"}static toggleSpoilerState(t){let i=t.currentTarget,l=i.nextElementSibling;l.classList.contains("_slide")===!1&&(m(l,e.animationDuration),i.classList.toggle(e.btnActiveClass),l.classList.toggle(e.contentActiveClass))}};let s=e;s.btnActiveClass="active",s.contentActiveClass="active";export{s as default};function o(n){return n.classList.contains("_slide")?!1:(n.classList.add("_slide"),!0)}function c(n,t){o(n)!=!1&&(n.style.transitionProperty="height, opacity",n.style.transitionDuration=`${t}ms`,n.style.height="0px",n.style.opacity="0",n.style.pointerEvents="none",window.setTimeout(()=>{n.classList.remove("_slide")},t))}function a(n,t){if(o(n)==!1)return;let i=n.scrollHeight;n.style.transitionProperty="height, opacity",n.style.transitionDuration=`${t}ms`,n.style.height=`${i}px`,n.style.opacity="1",n.style.pointerEvents="all",window.setTimeout(()=>{n.classList.remove("_slide")},t)}function m(n,t){n.style.height=="0px"?a(n,t):c(n,t)}

import{elementIsExistWithLog as r,returnScrollbarWidth as a}from"./general.js";const t=class{constructor(e){if(!!r("ModalWindowMenu",e.modalLinksSelector,e.modalClosersSelector)){e.burgerMenuSelector&&(t.burgerMenuClasslist=document.querySelector(e.burgerMenuSelector).classList),t.modalLinks=document.querySelectorAll(e.modalLinksSelector);for(let o of t.modalLinks)o.addEventListener("click",()=>{let l=o.dataset.openModalId;if(l){let i=document.getElementById(l);t.transitionTimeout=parseFloat(getComputedStyle(i).getPropertyValue("transition-duration"))*1e3,this.showOrHideModal(i)}});t.modalClosers=document.querySelectorAll(e.modalClosersSelector);for(let o of t.modalClosers)o.addEventListener("click",()=>this.closeModal(o.closest(".modal-window"),!0));document.addEventListener("keydown",o=>{if(o.code!="Escape")return;let l=document.querySelector(".modal-window.active");l&&this.closeModal(l,!0)})}}showOrHideModal(e){if(e&&t.UNLOCK){let o=document.querySelector(".modal-window.active");o?this.closeModal(o,!1):this.toggleBodyScroll(!1),e.classList.add("active")}e.addEventListener("click",o=>{o.target.closest(".modal-window__content")==null&&this.closeModal(e,!0)})}closeModal(e,o){t.UNLOCK!=!1&&(e.classList.remove("active"),setTimeout(()=>{o&&this.toggleBodyScroll(!0)},t.transitionTimeout*2))}toggleBodyScroll(e){this.chekPossibileSwitchScroll(e)?(document.body.style.paddingRight="",document.body.style.overflow=""):(document.body.style.paddingRight=a()+"px",document.body.style.overflow="hidden"),t.UNLOCK=!1,setTimeout(()=>{t.UNLOCK=!0},t.transitionTimeout*2)}chekPossibileSwitchScroll(e){return t.burgerMenuClasslist?!!(!t.burgerMenuClasslist.contains("active")&&e):e}};let s=t;s.UNLOCK=!0;export{s as default};
